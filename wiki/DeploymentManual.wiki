= Deployment manual =

<wiki:toc max_depth="3" />

== Recommended set up ==
The following set up has been used for development, staging and production. Due to the early version of this project additional knowledge about the technologies may be required in order to get the system up and running.

 * Java 6
 * Glassfish 3.0.1
 * MySQL or Derby

== Build process ==
The ODR makes use of Apache Maven and is therefore simple to build. To get started with the current development version use a fresh checkout of the project (recommended) and execute the following commands.

{{{
# expected to be executed from the /trunk/sources folder
mvn clean
cd testutil
mvn install
cd ../entities
mvn install
cd ../decision-management
mvn install
cd ../web-interface
mvn install
cd ../odr-startup
mvn install
}}}

All this could be simplified to a `mvn clean install` from within the _/trunk/sources_ directory. Unfortunately this is not possible due to the current project structure, i.e. acceptance tests would automatically be run. [http://code.google.com/p/opendecisionrepository/issues/detail?id=55 Issue 55] has been created to cope with this problem.
Please note that you currently need to have the Java Derby database up and running in order to build the decision-management component.

Result of the build process is the _OpenDecisionRepository.ear_ file in the _/trunk/sources/odr-startup/target_ directory.

=== Changing the context root ===
If you want to change the context root of the ODR from the default _/odr_ to something else you need to modify the following file:
/trunk/sources/odr-startup/src/main/application/META-INF/application.xml

== Preparing the application server ==
Preparing the application server is a matter of setting system properties and adding a connection pool and JDBC resources. The simplest approach is to use the Derby database that ships with Glassfish. To start the database execute the _start-database_ command on the _asadmin_ utility. After that use the left navigation bar (in the web admin menu) and click on _Resources => JDBC => JDBC Resources => New..._. In this new form enter the JNDI name *jdbc/odr*, select the DerbyPool and click _ok_.

As mentioned in the previous paragraph you need to set some system properties. System properties can be set using the admin menu by clicking on _Enterprise Server => System properties => Add property_. You can find a list of all properties and a description of them [http://code.google.com/p/opendecisionrepository/wiki/SystemProperties in the wiki].


=== Changing the JNDI name ===
The JNDI name *jdbc/odr* can be changed by modifying the persistence.xml file which can be found in the _/trunk/sources/entities/src/main/resources/META-INF_ directory.