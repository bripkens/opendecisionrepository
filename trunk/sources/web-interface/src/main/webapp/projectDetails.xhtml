<?xml version='1.0' encoding='UTF-8' ?>
<ui:composition template="template.xhtml" xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ice="http://www.icesoft.com/icefaces/component"
                xmlns:odr="http://www.decisionrepository.com/taglib">

    <ui:define name="head">
    </ui:define>

    <ui:define name="pagetitle">
        <ice:outputText value="#{page['projectDetails.page.title']}" nospan="true" />
        <ice:outputText value="#{projectDetailsController.projectName}" rendered="#{projectDetailsController.valid}" nospan="true"/>
    </ui:define>


    <ui:define name="content">
        <h1><h:outputText value="#{projectDetailsController.projectName}" rendered="#{projectDetailsController.valid}" /></h1>

        <p><h:outputText value="#{projectDetailsController.description}" rendered="#{projectDetailsController.valid}" /></p>

        <ice:form rendered="#{projectDetailsController.valid}" style="position:relative;" styleClass="members" >

            <div class="relative">
                <h3>#{page['projectDetails.members']}</h3> <a href="#" class="togglelink collapsable" name="memberContainer1" style="position: absolute; top:0;right:0;">#{common.toggle}</a>
                <div id="memberContainer1" class="toggleContainer" >
                    <ice:dataTable
                        value="#{projectDetailsController.projectMembers}" var="item" styleClass="rowhover pointer ">
                        <ice:column>
                            <ice:rowSelector
                                selectionListener="#{projectDetailsController.rowMemberSelectionListener}"/>
                            <ice:outputText value="#{item.person.name}" nospan="true"/>
                            <span>&lt;<ice:outputText value="#{item.person.email}" nospan="true"/>&gt;</span>
                        </ice:column>
                        <ice:column>
                            <ice:outputText value="#{item.role.name}" nospan="true"/>
                        </ice:column>
                    </ice:dataTable>
                </div>
            </div>

            <div class="relative">
                <h3>#{page['projectDetails.iterations.headline']}</h3> <a href="#" class="togglelink collapsable" name="iterationContainer" style="position: absolute; top:0;right:0;">#{common.toggle}</a>
                <div id="iterationContainer" class="toggleContainer" >
                    <ice:outputText value="#{page['projectDetails.iterations.add']}" nospan="true"/>

                    <ice:dataTable
                        value="#{projectDetailsController.iterations}" var="item" styleClass="rowhover pointer ">
                        <ice:column>
                            <ice:rowSelector
                                selectionListener="#{projectDetailsController.rowIterationSelectionListener}"/>
                            <ice:outputText value="#{item.name}" nospan="true"/>
                        </ice:column>
                        <ice:column>
                            <ice:outputText value="#{item.durationInDays}" nospan="true"/> <ice:outputText value="#{page['projectDetails.iterations.duration']}" nospan="true"/>
                        </ice:column>
                    </ice:dataTable>
                </div>
            </div>

            <h3><ice:outputText value="#{page['projectDetails.actions.headline']}" nospan="true"/></h3>

            <a href="#{projectDetailsController.updateLink}" id="updateLink" title="#{page['projectDetails.actions.edit.title']}" style="text-decoration: none;">
                <img alt="#{common.edit}" src="./resources/images/pencil.png" width="48" height="48" />
            </a>
            <a href="#{projectDetailsController.deleteLink}" style="margin-left: 20px;text-decoration: none;" id="deleteLink" title="#{page['projectDetails.actions.delete.title']}">
                <img alt="#{common.remove}" src="./resources/images/cross.png" width="48" height="48" />
            </a>


        </ice:form>

    </ui:define>

    <!--SIDEBAR-->
    <ui:define name="sidebar">
        <div id="help">
            <ul class="info">
                <li>
                    <div class="header">
                        <img src="resources/images/info.png" alt="information" />
                    </div>
                    <div class="text">
                        <h2><ice:outputText value="#{page['projectDetails.help.title']}" /></h2>
                        <ice:outputText value="#{page['projectDetails.help.text']}" />
                    </div>

                </li>

            </ul>
        </div>

    </ui:define>
</ui:composition>