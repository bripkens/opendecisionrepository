<?xml version='1.0' encoding='UTF-8' ?>
<ui:composition template="template.xhtml" xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ice="http://www.icesoft.com/icefaces/component"
                xmlns:odr="http://java.sun.com/jsf/composite/odr">

    <ui:define name="head">
    </ui:define>

    <ui:define name="pagetitle">
        <ice:outputText value="#{page['concern.page.title']}" nospan="true" />
    </ui:define>

    <ui:define name="content">

        <f:subview id="concernTableSubview" rendered="#{concernTableController.valid}">

        <ice:form partialSubmit="true" >
            <div class="formSection last">
                <ice:dataTable id="datalist"
                               border="1"
                               rows="#{concernTableController.listSize}"
                               style="border-collapse: collapse"
                               value="#{concernTableController.allConcerns}"
                               var="concern"
                               styleClass="sortableTable"
                               sortColumn="#{concernTableController.sortColumn}"
                               sortAscending="#{concernTableController.ascending}"
                               >


                    <ice:column styleClass="#{concern.subConcern ? 'columns':''}" style="#{(concern.subConcern and concern.white) ? 'background-color: #F7F7F7':''} #{(concern.subConcern and !concern.white) ? 'background-color: white':''}" >
                        <f:facet name="header">
                            <ice:commandSortHeader columnName="bild" arrow="true" >
                            </ice:commandSortHeader>
                        </f:facet>
                        <ice:commandLink partialSubmit="true" action="#{concern.setSelected(true)}" rendered="#{!concern.subConcern}" styleClass="sorterHeader">
                            <ice:graphicImage id="expandContractImage" rendered="#{concern.hasSub}"
                                              value="http://component-showcase.icefaces.org/component-showcase/xmlhttp/css/rime/css-images/tree_nav_top_open_no_siblings.gif"
                                              style="border: 0px solid;" />
                        </ice:commandLink>
                    </ice:column>

                    <!--  ID -->
                    <ice:column style="width: 20%">
                        <f:facet name="header">
                            <ice:commandSortHeader columnName="Id" arrow="true" >
                                <ice:outputText value="ExternalID"/>
                            </ice:commandSortHeader>
                        </f:facet>
                        <ice:outputText value="#{concern.concer.externalId}"></ice:outputText>
                    </ice:column>

                    <!--                         Titel-->
                    <ice:column style="width: 40%">
                        <f:facet name="header">
                            <ice:commandSortHeader columnName="Name" arrow="true" >
                                <ice:outputText value="Name"/>
                            </ice:commandSortHeader>
                        </f:facet>
                        <ice:outputText value="#{concern.concer.name}" rendered="#{!concern.subConcern}"></ice:outputText>
                        <ice:outputText value="#{concern.concer.createdWhen}" rendered="#{concern.subConcern}">
                            <f:convertDateTime dateStyle="medium"/>
                        </ice:outputText>
                    </ice:column>

                    <!--                          Autor-->
                    <ice:column style="width: 30%">
                        <f:facet name="header">
                            <ice:commandSortHeader columnName="creator" arrow="true" >
                                <ice:outputText value="creator"/>
                            </ice:commandSortHeader>
                        </f:facet>
                        <ice:outputText value="#{concern.concer.initiators.person.name}"></ice:outputText>
                    </ice:column>

                </ice:dataTable>

                <ice:panelGrid columns="1" styleClass="scrollerTable2" columnClasses="standardTable_ColumnCentered" >

                    <ice:dataPaginator id="scroll_1"
                                       for="datalist"
                                       fastStep="4"

                                       pageCountVar="pageCount"
                                       pageIndexVar="pageIndex"
                                       paginator="true"
                                       paginatorMaxPages="9"
                                       >
                        <f:facet name="first" >
                            <ice:graphicImage url="/resources/images/arrow-first.gif" style="border:none;"/>
                        </f:facet>

                        <f:facet name="last">
                            <ice:graphicImage url="resources/images/arrow-last.gif" style="border:none;" />
                        </f:facet>

                        <f:facet name="previous">
                            <ice:graphicImage url="resources/images/arrow-previous.gif" style="border:none;" />
                        </f:facet>

                        <f:facet name="next">
                            <ice:graphicImage url="resources/images/arrow-next.gif" style="border:none;" />
                        </f:facet>

                        <f:facet name="fastforward">
                            <ice:graphicImage url="resources/images/arrow-ff.gif" style="border:none;" />
                        </f:facet>

                        <f:facet name="fastrewind">
                            <ice:graphicImage url="resources/images/arrow-fr.gif" style="border:none;" />
                        </f:facet>


                    </ice:dataPaginator>


                </ice:panelGrid>

            </div>
        </ice:form>
</f:subview>

    </ui:define>
</ui:composition>