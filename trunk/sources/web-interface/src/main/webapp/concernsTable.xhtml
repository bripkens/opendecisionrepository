<?xml version='1.0' encoding='UTF-8' ?>
<ui:composition template="template-without-sidebar.xhtml" xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ice="http://www.icesoft.com/icefaces/component"
                xmlns:odr="http://java.sun.com/jsf/composite/odr">

    <ui:define name="head">
        <script type="text/javascript" src="resources/js/searchableTable.js"></script>
        <!--        <script type="text/javascript" src="resources/js/jquery.tablesorter.min.js"></script>-->
    </ui:define>

    <ui:define name="pagetitle">
        <ice:outputText value="#{page['concern.page.title']}" nospan="true" />
    </ui:define>

    <ui:define name="content">
        <form>
            <label for="searchInput" class="prefillValue" style="display: none">Search</label>
            <ice:inputText id="searchInput" onkeyup="doFilter(this, 'concernList')" style="width: 200px;" styleClass="prefill"/>
        </form>
        <ice:form partialSubmit="true">
            <table class="dataList" id="concernList">
                <thead>
                    <tr>
                        <th style="width: 5%;"></th>
                        <th style="width: 20%;">External-Id</th>
                        <th style="width: 56%;">Name</th>
                        <th style="width: 19%;">Creation date</th>
                        <th colspan="3" style="">Actions</th>
                    </tr>
                </thead>
                <tbody>
                <ice:repeat value="#{concernTableController1.list}" var="item" id="concernRepeat">
                    <tr class="parentRow group-#{item.concer.id} #{item.colored ? 'even' : 'odd'}">
                        <td style="border-bottom: none">
                            <a class="toggleSubTableShow toggleSubTable" href="#" style="display: none"/>
                        </td>
                        <td>#{item.concer.externalId}</td>
                        <td>#{item.concer.name}</td>
                        <td>#{concernTableController1.getDate(item)}</td>
                        <td>
                            <a href="#{concernTableController1.getShowLink(item)}" ><img alt="#{common.read}"
                                     src="resources/images/inspect.png"
                                     width="14"
                                     height="14"/></a></td>
                            <td><a href="#{concernTableController1.getUpdateLink(item)}" ><img alt="#{common.edit}"
                                     src="resources/images/pencilSmall.png"
                                     width="14"
                                     height="14"/></a></td>
                            <td><img alt="#{common.remove}"
                                     src="resources/images/removeSmall.png"
                                     width="14"
                                     height="14"/></td>
                    </tr>
                    <ice:repeat value="#{concernTableController1.getSubconcern(item)}" var="subconcern" id="concernRepeat1">
                        <tr style="display: none;" class="subRow group-#{item.concer.id} #{item.colored ? 'even' : 'odd'}">
                            <td style="border:none;"></td>
                            <td>#{subconcern.concer.externalId}</td>
                            <td>#{subconcern.concer.name}</td>
                            <td>#{concernTableController1.getDate(subconcern)}</td>
                            <td><img alt="#{common.read}"
                                     src="resources/images/inspect.png"
                                     width="14"
                                     height="14"/></td>
                            <td><img alt="#{common.edit}"
                                     src="resources/images/pencilSmall.png"
                                     width="14"
                                     height="14"/></td>
                            <td><img alt="#{common.remove}"
                                     src="resources/images/removeSmall.png"
                                     width="14"
                                     height="14"/></td>
                        </tr>
                    </ice:repeat>
                </ice:repeat>
                </tbody>
            </table>
        </ice:form>
    </ui:define>

</ui:composition>